<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>view info</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <form>
    <fieldset>
      <legend>Get all students</legend>
      <button id="all" type="button">View all student</button>
      <table>
        <thead>
          <tr>
            <th>Student ID</th>
            <th>First name</th>
            <th>Last name</th>
            <th>Programme</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </fieldset>

  </form>

  <form>
    <fieldset>
      <legend>Getting one info</legend>
      <input type="text" id="enter" />
      <button id="one" type="button">View a student</button>
      <table>
        <thead>
          <tr>
            <th>Student ID</th>
            <th>First name</th>
            <th>Last name</th>
            <th>Programme</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </fieldset>
  </form>




  <script type="text/javascript">
    var getAllUrl = 'http://localhost/STUDENTMANAGEMENT/api/read.php';
    var getOneUrl = 'http://localhost/STUDENTMANAGEMENT/api/read_single.php?Student_id='

    document.getElementById('all').addEventListener('click', getAll)
    document.getElementById('one').addEventListener('click', getOne)

    function getAll() {
      fetch(getAllUrl).then(response => {
        return response.json();
      }).then(data => {
        // arr =  Object.keys(data);
        arr = data.data;
        // console.log(arr)
        arr.forEach(element => {
          tbody = document.getElementsByTagName("tbody")[0];
          row = tbody.insertRow(0);
          cell0 = row.insertCell(0);
          cell1 = row.insertCell(1);
          cell2 = row.insertCell(2);
          cell3 = row.insertCell(3);
          cell0.innerHTML = element.Student_id;
          cell1.innerHTML = element.First_name;
          cell2.innerHTML = element.Last_name;
          cell3.innerHTML = element.Programme;

        });
      }).catch(err => {
        // Do something for an error here
      });
      document.getElementById('all').setAttribute("disabled", "disabled")
    }

    function getOne() {
      var value = document.getElementById("enter").value
      getOneUrl += value
      fetch(getOneUrl).then(response => {
        return response.json();
      }).then(data => {
        // arr =  Object.keys(data);
        tbody = document.getElementsByTagName("tbody")[1];
        row = tbody.insertRow(0);
        cell0 = row.insertCell(0);
        cell1 = row.insertCell(1);
        cell2 = row.insertCell(2);
        cell3 = row.insertCell(3);
        cell0.innerHTML = data.Student_id;
        cell1.innerHTML = data.First_name;
        cell2.innerHTML = data.Last_name;
        cell3.innerHTML = data.Programme;

      }).catch(err => {
        // Do something for an error here
      });
      document.getElementById('one').setAttribute("disabled", "disabled")

    }

  </script>

</body>

</html>